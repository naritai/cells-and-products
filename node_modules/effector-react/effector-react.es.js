function t(t){var e,r;return r=e=class extends l{constructor(){super(...arguments),this.state={currentState:t.getState()},this._unsubscribe=null,this._hasUnmounted=0}componentDidMount(){this.subscribe()}componentWillUnmount(){this.unsubscribe(),this._hasUnmounted=1}render(){return this.props.children(this.state.currentState)}subscribe(){const e=t.subscribe(t=>{this._hasUnmounted||this.setState(e=>t===e.currentState?null:{currentState:t})});this._unsubscribe=e}unsubscribe(){'function'==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null}},e.displayName=`${t.shortName}.Consumer`,r}function e(t){var e,r;return r=e=class extends l{constructor(){super(...arguments),this.state={currentValue:null}}static getDerivedStateFromProps(e){return t.setState(e.value),{currentValue:e.value}}render(){return this.props.children}},e.displayName=`${t.shortName}.Provider`,e.defaultProps={children:null},r}function r(e,r,s){var n,o;const c=t(e);return o=n=class extends l{constructor(){super(...arguments),this.renderProp=(t=>s(this.props,t,this.context))}render(){return p(c,null,this.renderProp)}},n.contextType=r,o}function s(e,r){const s=t(e);return class extends l{constructor(){super(...arguments),this.renderProp=(t=>r(this.props,t))}render(){return p(s,null,this.renderProp)}}}function n(t){const e=d(t.getState),r=e[0],s=e[1];return h(()=>t.watch(t=>s(()=>t)),[t]),r}function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t}).apply(this,arguments)}function c(e,r){const s=t(e),n=t=>p(s,null,e=>p(r,o({},t,e)));return n.displayName=`Connect(${r.displayName||r.name||'Unknown'})`,n}function u(t){return e=>c(e,t)}function a(t,e){void 0===e&&(e={}),h(()=>(t.open(),()=>t.close()),[t]),t.set(e)}function i(t,e){void 0===t&&(t='gate'),void 0===e&&(e={});const r=v(0),s=v(e),n=b(s,{set:(t,e)=>e}).set,o=b(r,{open:()=>l.predicate()&&1,close:()=>0,destructor:()=>0}),c=o.open,u=o.close,a=o.destructor;class l extends f{static childGate(e){void 0===e&&(e='Subgate');const r=i(`${t}/${e}`);r.predicate=(()=>l.status.getState());let s=0,n=0;return r.open.watch(()=>{n||(s=1)}),r.close.watch(()=>{n||(s=0)}),l.status.watch(t=>{n=1,s&&t&&!r.status.getState()&&r.open(),n=0}),l.close.watch(()=>{n=1,r.close(),n=0}),l.destructor.watch(()=>r.destructor()),r}componentDidMount(){l.open()}componentWillUnmount(){l.close()}render(){return l.set(this.props),null}}l.predicate=(()=>1),l.displayName=`Gate:${t}`,l.isOpen=0,l.current=s.getState(),l.open=c,l.close=u,l.status=r,l.state=s,l.set=n,l.destructor=a,l.isTerminated=0;const p=r.watch(t=>l.isOpen=t),d=s.watch(t=>l.current=t);r.map(t=>{t||(l.current=e)}),s.reset(u);const h=a.watch(()=>{l.isTerminated=1}),m=a.watch(()=>{m(),p(),d(),h(),(()=>{l.status.off(l.open),l.status.off(l.close),l.status.off(l.destructor)})(),l.state.off(l.set)});return l}import{Component as l,createElement as p,useState as d,useEffect as h,PureComponent as f}from'react';import{createDomain as m,createApi as b}from'effector';const v=m('Gate').store;export{t as createStoreConsumer,e as unstable_createStoreProvider,r as createContextComponent,s as createComponent,n as useStore,u as connect,c as createReactState,i as createGate,a as useGate};
//# sourceMappingURL=effector-react.es.js.map
